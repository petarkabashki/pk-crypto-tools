
#################################################################
###  Statistical Functions
#################################################################

### Rolling Mean, tested against Pandas .rolling().mean()
WMeanâ† {+`(ğ•©-(-ğ•¨)â†“(ğ•¨â¥Š0)âˆ¾ğ•©)Ã·ğ•¨}
2 WMean 1+â†•100
1+â†•100
Â¯4â†‘3 WMean â‹†âŸœ1.2 â†•20

### EMA 
Emaâ†{kâ†2Ã·1+ğ•¨â‹„{(kÃ—ğ•©)+ğ•¨Ã—1-k}`ğ•©} 
50 Ema â†•1e1

### Variance Welford's method, tested against Numpy np.var([])
Varâ†{nâ€¿mâ€¿sâ†1â€¿0â€¿0{
  kâ€¿mâ€¿sâ†ğ•©â‹„
    newMâ†m+(ğ•¨-m)Ã·kâ‹„
	  (k+1)â€¿newMâ€¿(s+(ğ•¨-newM)Ã—(ğ•¨-m))
	}Â´âŒ½ğ•©â‹„
	sÃ·n-1}
 Var 10Ã·Ëœ1+â†•2
Var â‹†âŸœ1.2 â†•20
âŠ‘2+â†•10

### Rolling Variance
â‹†âŸœ1.2 â†•20
âŠ‘âŠ¸Â» 1+â†•10
(Â»+âŠ¢) 1+â†•10


#2 {vâ†Var ğ•¨â†‘ğ•©â‹„
# m1â†âŠ‘âŠ¸Â» ğ•¨ WMean ğ•©â‹„
# x0â†(ğ•¨â¥Š0)Â»ğ•©â‹„
# s1â†(ğ•©-x0)â‹„
# s2â†(ğ•©Ã—(ğ•¨-1)Ã·ğ•¨) + (x0Ã—(ğ•¨+1)Ã·ğ•¨) -2Ã—m0â‹„
# (ğ•¨-1)Ã·Ëœ(vÃ—ğ•¨-1)`+ğ•¨â†“s1Ã—s2â‹„
 #s2â‹„
#} â‹†âŸœ1.2 â†•20

### ROlling Variance, tested against Pandas.rolling().var(ddof=1)
WVar â† {vâ†Var ğ•¨â†‘ğ•©â‹„
 mmâ†(Â»+âŠ¢) ğ•¨ WMean ğ•©â‹„
 x0â†(ğ•¨â¥Š0)Â»ğ•©â‹„
 zâ†(ğ•©-x0)Ã—(ğ•©+x0-mm)â‹„
 (0â¥ŠËœğ•¨-1)âˆ¾ (ğ•¨-1)Ã·Ëœ +`(vÃ—ğ•¨)âˆ¾ğ•¨â†“zâ‹„
} 
3 WVar â‹†âŸœ1.2 â†•20
### Rolling Std, Tested against Pandas.rolling(w).std(ddof=1)
WStd â† âˆšâˆ˜WVar

Â¯4â†‘3 WStd â‹†âŸœ1.2 â†•20

 #Varâ†{nâ€¿mâ€¿sâ†1â€¿0â€¿0{kâ€¿mâ€¿sâ†ğ•©â‹„oldMâ†mâ‹„mâ†©m+(ğ•¨-m)Ã·kâ‹„sâ†©s+(ğ•¨-m)Ã—(ğ•¨-oldM)â‹„(k+1)â€¿mâ€¿s}Â´âŒ½ğ•©â‹„sÃ·n-1}
 #Var (âŠ¢Ã·â‰ )â†•30

csv â† "',/" â€¢Import "./bqn-libs/csv.bqn"  # Easier characters to write

lines â† â€¢FLines "ALGO_USDT-1d.csv"
â‰¢lines
c â† csv.SplitL lines
châ†1â†‘c
cvâ†1â†“c
#cvâ† â€¢ParseFloatÂ¨Â¨  1â†“c
cv â€¢ParseFloatÂ¨Â¨â†©

â†‘10â†‘cv
dcvâ†>cv
4â†‘dcv
((â†•â‰ )âˆ¾Ë˜âŠ¢)dcv
â‰¢â‰dcv

âŸ¨ts,op,hi,lo,cl,voâŸ©â†<Ë˜â‰dcv
cl
â‰¢dcv
â‰ dcv
â‰¢0â€¿Â¯1â†“0â€¿1â†“dcv
âˆ¾Ë0â€¿Â¯1â†“0â€¿4â†“dcv
#âŸ¨<Â¯2âŸ©âŠÂ¨dcv
âŠ‘Â¯1â†‘Â¯1â†“<Ë˜â‰dcv
#################################################################
###  Technical Indicators 
#################################################################


ixsâ†(â†•â‰ cl)
â‰>ixsâ€¿cl
ema50 â† 21 Ema cl
cl
std â†  2 WVar cl
#pclâ†â‰>(â†•â‰ cl)â€¿clâ€¿ema50
#(â†•âŠ‘1â†“â‰¢ clâ‰ema50
#pclâ†â‰(((â†•â‰ )â‰âŠ¢) cl)â‰<ema50

âŸ¨GnuplotâŸ© â† â€¢Import "Gnuplot.bqn"

plt â† Gnuplot "
  title 'Price and EMA' font ',18'
	terminal wxt size 1300,600
	style line 5 lt rgb 'cyan' lw 3 pt 6
"
4â†‘â‰>ixsâ€¿cl
plt.Plot (â‰>ixsâ€¿cl)â€¿"lw 0.5 lc rgb 'blue' with lines"
plt.Plot (â‰>ixsâ€¿ema50)â€¿"lw 0.5 lc rgb 'red' with lines"
# ZigZag like neurotrader


"gnuplot-example-1.txt" â€¢file.Chars plt.Debug @

0.1 {ğ•©} cl



#âŸ¨4â€¿4,0â€¿âˆâŸ© âŠ‘ dcv


#hwâ†"h"
#hwâ†©"Hello "â€¿"World!"
#â¥ŠÂ¨hw

