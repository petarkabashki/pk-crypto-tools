
âŸ¨GnuplotâŸ© â† â€¢Import "Gnuplot.bqn"

#################################################################
###  Statistical Functions
#################################################################

### Rolling Mean, tested against Pandas .rolling().mean()
WMeanâ† {+`(ğ•©-(-ğ•¨)â†“(ğ•¨â¥Š0)âˆ¾ğ•©)Ã·ğ•¨}
2 WMean 1+â†•100
1+â†•100
Â¯4â†‘3 WMean â‹†âŸœ1.2 â†•20

### EMA 
Emaâ†{kâ†2Ã·1+ğ•¨â‹„{(kÃ—ğ•©)+ğ•¨Ã—1-k}`ğ•©} 
50 Ema â†•1e1

### Variance Welford's method, tested against Numpy np.var([])
# https://jonisalonen.com/2013/deriving-welfords-method-for-computing-variance/
Varâ†{nâ€¿mâ€¿sâ†1â€¿0â€¿0{
  kâ€¿mâ€¿sâ†ğ•©â‹„
    newMâ†m+(ğ•¨-m)Ã·kâ‹„
	  (k+1)â€¿newMâ€¿(s+(ğ•¨-newM)Ã—(ğ•¨-m))
	}Â´âŒ½ğ•©â‹„
	sÃ·n-1}
 Var 10Ã·Ëœ1+â†•2
Var â‹†âŸœ1.2 â†•20
âŠ‘2+â†•10

### ROlling Variance, tested against Pandas.rolling().var(ddof=1)
# Source: https://jonisalonen.com/2014/efficient-and-accurate-rolling-standard-deviation/
# Another similar algorithm here () https://www.dfki.de/fileadmin/user_upload/import/7051_131008_Memory_and_Processing_Efficient_Formula_for_Moving_Variance_Calculation_in_EEG_and_EMG_Signal_Processing_NEUROTECHNIX_Krell.pdf
WVar â† {vâ†Var ğ•¨â†‘ğ•©â‹„
 mmâ†(Â»+âŠ¢) ğ•¨ WMean ğ•©â‹„
 x0â†(ğ•¨â¥Š0)Â»ğ•©â‹„
 zâ†(ğ•©-x0)Ã—(ğ•©+x0-mm)â‹„
 (0â¥ŠËœğ•¨-1)âˆ¾ (ğ•¨-1)Ã·Ëœ +`(vÃ—ğ•¨)âˆ¾ğ•¨â†“zâ‹„
} 
3 WVar â‹†âŸœ1.2 â†•20

### Rolling Std, Tested against Pandas.rolling(w).std(ddof=1)
WStd â† âˆšâˆ˜WVar

Â¯4â†‘3 WStd â‹†âŸœ1.2 â†•20

#-âŸœÂ» 
### Bins and Quantiles

### ğ•©-step bin values, right-side â‰¤ of bins
QBins â† {soâ†âˆ§ğ•©â‹„
	staâ€¿endâ†0â€¿Â¯1âŠsoâ‹„
  lsâ†sta+(1+â†•ğ•¨)Ã—(end-sta)Ã·ğ•¨â‹„
	cuxâ†+Ësoâ‰¤âŒœlsâ‹„
	(cux-1)âŠso
} 
3 QBins â†•12

### Divides values into ğ•¨ bins and outputs the right-side (â‰¤) edges
VBins â† {soâ†âˆ§ğ•©â‹„
	staâ€¿endâ†0â€¿Â¯1âŠsoâ‹„
  lsâ†sta+(1+â†•ğ•¨)Ã—(end-sta)Ã·ğ•¨â‹„
	tvâ†-âŸœÂ» cuxâ†+Ësoâ‰¤âŒœlsâ‹„ #number of values to take into every bin
	tv /âŠ¸âŠ” so
	#(cux-1)âŠso
}
### Histogram
4 
20 {
nbâ†>(+Â´(Ã·â‹ˆâŠ¢)â‰ )Â¨ ğ•¨ VBins ğ•©
plt â† Gnuplot "
  title 'Histogram' font ',18'
	terminal wxt size 1300,600
	style line 5 lt rgb 'cyan' lw 3 pt 6
"
plt.Plot nbâ€¿"using 1:2 with boxes fillstyle pattern 5 title ''"
"gnuplot-histogram-1.txt" â€¢file.Chars plt.Debug @
â€¢SH "gnuplot"â€¿"-persist"â€¿"gnuplot-histogram-1.txt"
} 2000+ â‹†âŸœ3 Â¯5000+â†•10000

 #3 {bâ†ğ•¨ Bins ğ•©â‹„-âŸœÂ»b} â†•12
#3 VBins â†•12# â‹†âŸœ2 Ã·âŸœ10 Â¯50+ â†•101

csv â† "',/" â€¢Import "./bqn-libs/csv.bqn"  # Easier characters to write

lines â† â€¢FLines "ALGO_USDT-1d.csv"
â‰¢lines
c â† csv.SplitL lines
châ†1â†‘c
cvâ†1â†“c
#cvâ† â€¢ParseFloatÂ¨Â¨  1â†“c
cv â€¢ParseFloatÂ¨Â¨â†©

â†‘10â†‘cv
dcvâ†>cv
4â†‘dcv
((â†•â‰ )âˆ¾Ë˜âŠ¢)dcv
â‰¢â‰dcv

âŸ¨ts,op,hi,lo,cl,voâŸ©â†<Ë˜â‰dcv
cl
â‰¢dcv
â‰ dcv
â‰¢0â€¿Â¯1â†“0â€¿1â†“dcv
âˆ¾Ë0â€¿Â¯1â†“0â€¿4â†“dcv
#âŸ¨<Â¯2âŸ©âŠÂ¨dcv
âŠ‘Â¯1â†‘Â¯1â†“<Ë˜â‰dcv
#################################################################
###  Technical Indicators 
#################################################################

stds â† 14 WStd cl
ixsâ†(â†•â‰ cl)
â‰>ixsâ€¿cl
emaBo â† 21 Ema cl
boLâ€¿boH â† (<emaBo) +Ë˜ âŸ¨Â¯1,1âŸ©Ã—Â¨<stds
#â‰ bol
cl
#â‰>ixsâ€¿emaBo

plt â† Gnuplot "
  title 'Price and EMA' font ',18'
	terminal wxt size 1300,600
	style line 5 lt rgb 'cyan' lw 3 pt 6
"
4â†‘â‰>ixsâ€¿cl
plt.Plot (â‰>ixsâ€¿cl)â€¿"lw 0.5 lc rgb 'blue' with lines"
plt.Plot (â‰>ixsâ€¿emaBo)â€¿"lw 0.5 lc rgb 'black' with lines"
plt.Plot (â‰>ixsâ€¿boL)â€¿"lw 0.5 lc rgb 'green' with lines"
plt.Plot (â‰>ixsâ€¿boH)â€¿"lw 0.5 lc rgb 'red' with lines"
# ZigZag like neurotrader


"gnuplot-example-1.txt" â€¢file.Chars plt.Debug @

0.1 {ğ•©} cl



#âŸ¨4â€¿4,0â€¿âˆâŸ© âŠ‘ dcv


#hwâ†"h"
#hwâ†©"Hello "â€¿"World!"
#â¥ŠÂ¨hw
 
